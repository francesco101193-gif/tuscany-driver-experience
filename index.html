<!DOCTYPE html>
<html lang="it" data-lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tuscany Driver Experience - Tour Privati con Autista</title>
  <meta name="description" content="Itinerari 100% personalizzati in Toscana con autista privato NCC. Arte e cultura, vino e gastronomia, mare e montagna, benessere termale e molto altro. Richiedi il tuo itinerario su misura." />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #f5f0e8;
      --text: #1a1a1a;
      --muted: #4a4a4a;
      --accent: #d4af37;
      --card: #fff9f0;
      --line: #d4c4b0;
      --maxw: 1100px;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
    }

    a { color: inherit; text-decoration: none; }
    img { max-width: 100%; display: block; }
    .container { max-width: var(--maxw); margin: 0 auto; padding: 0 20px; }

    .btn, .cta {
      display: inline-block;
      background: var(--accent);
      color: #1a1a1a;
      font-weight: 700;
      padding: 14px 22px;
      border-radius: 10px;
      box-shadow: 0 8px 20px rgba(212,175,55,.25);
      transition: transform .08s ease, box-shadow .2s ease;
    }
    .btn:hover, .cta:hover {
      transform: translateY(-1px);
      box-shadow: 0 12px 26px rgba(212,175,55,.35);
    }

    .grid { display: grid; gap: 18px; grid-template-columns: repeat(12, 1fr); }

    .card {
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: 14px;
      padding: 18px;
    }

    h1,h2,h3 { line-height: 1.2; margin: 0 0 10px; color: var(--text); }
    h1 { font-size: clamp(32px, 6vw, 56px); }
    h2 { font-size: clamp(24px, 3.6vw, 34px); margin-bottom: 16px; }
    h3 { font-size: 20px; margin-bottom: 10px; }
    p { margin: 0 0 12px; }
    .muted { color: var(--muted); }

    /* HERO */
    header.hero {
      position: relative;
      min-height: 92vh;
      display: grid;
      place-items: center;
      text-align: center;
      background: #000 url("assets/img/hero.png?v=8") center/cover no-repeat !important;
    }
    header.hero::after { content: ""; position: absolute; inset: 0; background: none; }

    .hero-inner { position: relative; z-index: 1; padding: 40px 0; }
    .hero-inner, .hero-inner h1, .hero-inner .sub { color: #000 !important; text-shadow: none; }

    .badge {
      display: inline-block;
      padding: 6px 10px;
      border: 1px solid rgba(0,0,0,.25);
      border-radius: 999px;
      color: #000;
      font-size: 14px;
      margin-bottom: 14px;
      background: rgba(255,255,255,.65);
      backdrop-filter: blur(6px);
    }

    .sub { font-size: clamp(16px, 2.6vw, 20px); max-width: 860px; margin: 0 auto 24px; }

    .section { padding: 56px 0; }

    .section.alt { background: #e8e0d5; }

    .cols-2 { display: grid; gap: 20px; grid-template-columns: 1fr; }
    @media (min-width: 880px) { .cols-2 { grid-template-columns: 1.1fr .9fr; } }

    .list { display: grid; gap: 10px; }
    .pill {
      display: inline-block;
      border: 1px solid var(--line);
      border-radius: 999px;
      padding: 6px 10px;
      color: var(--muted);
      font-size: 14px;
    }

    footer {
      text-align: center;
      color: var(--muted);
      font-size: 14px;
      padding: 28px 12px 40px;
      background: #e8e0d5;
    }

    /* Mini-gallerie */
    .thumb-row { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin: 16px 0; }
    @media (max-width: 980px) { .thumb-row { grid-template-columns: repeat(2, 1fr); } }
    @media (max-width: 640px) { .thumb-row { grid-template-columns: 1fr; } }
    .thumb {
      position: relative;
      overflow: hidden;
      border-radius: 12px;
      border: 1px solid var(--line);
      background: var(--card);
    }
    .thumb img {
      width: 100%; height: 100%; object-fit: cover; aspect-ratio: 4/3;
      transition: transform .25s ease; display: block;
    }
    .thumb:hover img { transform: scale(1.04); }

    /* Galleria per citt√† */
    .gallery-section { margin-top: 26px; }
    .gallery-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; }
    @media (max-width: 1100px) { .gallery-grid { grid-template-columns: repeat(3, 1fr); } }
    @media (max-width: 780px) { .gallery-grid { grid-template-columns: 1fr; } }
    .gallery-item {
      position: relative; overflow: hidden; border-radius: 12px; border: 1px solid var(--line);
      background: var(--card); cursor: zoom-in;
    }
    .gallery-item img {
      width: 100%; height: 100%; object-fit: cover; aspect-ratio: 4 / 3;
      transition: transform .25s ease; display: block;
    }
    .gallery-item:hover img { transform: scale(1.04); }
    @media (max-width: 780px) {
      .gallery-item img { aspect-ratio: 3 / 4; object-position: center; }
    }

    /* Testimonial */
    .testimonial-grid {
      display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px; margin-top: 20px;
    }
    .testimonial-card {
      background: var(--card); border: 1px solid var(--line);
      border-radius: 14px; padding: 24px; position: relative;
    }
    .testimonial-card::before {
      content: '"'; position: absolute; top: 10px; left: 20px;
      font-size: 48px; color: var(--accent); opacity: 0.3; font-family: Georgia, serif;
    }
    .testimonial-text { font-style: italic; color: var(--text); margin-bottom: 12px; padding-top: 20px; }
    .testimonial-author { color: var(--muted); font-size: 14px; text-align: right; }
    .stars { color: var(--accent); margin-bottom: 10px; }

    /* Lightbox */
    .lightbox {
      position: fixed; inset: 0; background: rgba(0,0,0,.8);
      display: none; place-items: center; z-index: 9999; padding: 24px;
    }
    .lightbox.show { display: grid; }
    .lightbox img {
      max-width: 92vw; max-height: 92vh; border-radius: 12px; box-shadow: 0 10px 40px rgba(0,0,0,.6);
    }

    /* Language Switcher */
    .lang-switcher {
      position: fixed; top: 20px; right: 20px; z-index: 1000;
      display: flex; gap: 10px; background: rgba(255,255,255,.9); padding: 8px;
      border-radius: 25px; box-shadow: 0 4px 12px rgba(0,0,0,.15); backdrop-filter: blur(10px);
    }
    .lang-btn {
      display: flex; align-items: center; gap: 6px; padding: 6px 12px; border: none;
      background: transparent; cursor: pointer; border-radius: 20px; transition: background .2s ease;
      font-size: 14px; font-weight: 600; color: var(--text);
    }
    .lang-btn:hover { background: rgba(0,0,0,.05); }
    .lang-btn.active { background: var(--accent); color: #1a1a1a; }
    .lang-flag { width: 20px; height: 20px; border-radius: 50%; object-fit: cover; }
  </style>
</head>
<body>
  <!-- Language Switcher -->
  <div class="lang-switcher" aria-label="Language switcher">
    <button class="lang-btn active" data-lang="it" onclick="setLanguage('it')" aria-pressed="true" aria-label="Italiano">
      <span class="lang-flag">üáÆüáπ</span><span>IT</span>
    </button>
    <button class="lang-btn" data-lang="en" onclick="setLanguage('en')" aria-pressed="false" aria-label="English">
      <span class="lang-flag">üá¨üáß</span><span>EN</span>
    </button>
  </div>

  <!-- HERO -->
  <header class="hero" style="background: #000 url('assets/img/hero.png?v=8') center/cover no-repeat;">
    <div class="container hero-inner">
      <span class="badge" data-i18n="hero.badge">Autista privato ‚Ä¢ Tour su misura</span>
      <h1 data-i18n="hero.title">Tuscany Driver Experience</h1>
      <p class="sub" data-i18n="hero.subtitle">Scopri la Toscana a modo tuo. Itinerari completamente personalizzati: dalle colline del Chianti alle coste incontaminate, dai borghi medievali alle terme naturali. Il tuo autista privato, i tuoi orari, il tuo viaggio indimenticabile.</p>
      <a class="cta form-link" data-i18n="hero.cta" data-i18n-href="form.url" href="https://docs.google.com/forms/d/e/1FAIpQLSd7jfkcP_KpGxCEdTSuEl7ZTzEvoEl6RJ9j-4DJYJ78Rnac3w/viewform?usp=header" target="_blank" rel="noopener">Richiedi il tuo itinerario personalizzato</a>
    </div>
  </header>

  <!-- ABOUT -->
  <section class="section" id="about">
    <div class="container cols-2">
      <div>
        <h2 data-i18n="about.title">Vivi la Toscana oltre l'ordinario</h2>
        <p data-i18n="about.text">Creiamo itinerari su misura che mostrano l'incredibile diversit√† dei paesaggi e delle esperienze toscane, adattandoci ai tuoi desideri e interessi.</p>
        <div class="list">
          <span class="pill" data-i18n="about.pill1">Partenza ovunque (citt√†, aeroporti, anche fuori regione)</span>
          <span class="pill" data-i18n="about.pill2">Tappe ed esperienze a tua scelta</span>
          <span class="pill" data-i18n="about.pill3">Durata e ritmi personalizzati</span>
          <span class="pill" data-i18n="about.pill4">Autisti NCC professionali e multilingue</span>
        </div>
      </div>
      <div class="card">
        <img src="assets/img/about.jpg?v=2" alt="Paesaggi toscani" />
      </div>
    </div>
  </section>

  <!-- EXPERIENCES -->
  <section class="section alt" id="esperienze">
    <div class="container">
      <h2 data-i18n="exp.title">Esempi di Esperienze</h2>
      <div class="grid itinerary-grid" style="margin-top:14px;">
        <div class="card" style="grid-column: span 12;">
          <h3 data-i18n="exp.art.title">üèõÔ∏è Arte e Cultura</h3>
          <p class="muted" data-i18n="exp.art.text">Rinascimento, architettura medievale e patrimonio artistico. Itinerari su misura secondo i tuoi interessi.</p>
        </div>
        <div class="card" style="grid-column: span 12;">
          <h3 data-i18n="exp.wine.title">üç∑ Enogastronomia</h3>
          <p class="muted" data-i18n="exp.wine.text">Dal Chianti a Montalcino, fino ai piccoli produttori nascosti. Degustazioni e sapori autentici.</p>
        </div>
        <div class="card" style="grid-column: span 12;">
          <h3 data-i18n="exp.active.title">üåä Active Escape</h3>
          <p class="muted" data-i18n="exp.active.text">Garfagnana, Alpi Apuane, Versilia, Costa degli Etruschi: avventure mare, montagna e collina.</p>
        </div>
        <div class="card" style="grid-column: span 12;">
          <h3 data-i18n="exp.spa.title">‚ô®Ô∏è Benessere Termale</h3>
          <p class="muted" data-i18n="exp.spa.text">Bagno Vignoni e altre gemme termali per un relax su misura.</p>
        </div>
        <div class="card" style="grid-column: span 12;">
          <h3 data-i18n="exp.coast.title">üèñÔ∏è Esperienze Costiere</h3>
          <p class="muted" data-i18n="exp.coast.text">Versilia e oltre: scegli tu la localit√† costiera che vuoi esplorare.</p>
        </div>
        <div class="card" style="grid-column: span 12;">
          <h3 data-i18n="exp.classic.title">üè∞ Toscana Classica (2-3 giorni)</h3>
          <p class="muted" data-i18n="exp.classic.text">Val d'Orcia, Siena, Pienza, Montalcino o i borghi che sogni di visitare.</p>
        </div>
      </div>

      <div class="thumb-row" aria-label="Galleria esperienze">
        <div class="thumb"><img src="assets/img/exp1.jpg?v=2" alt="Esperienza 1"></div>
        <div class="thumb"><img src="assets/img/exp2.jpg?v=2" alt="Esperienza 2"></div>
        <div class="thumb"><img src="assets/img/exp3.jpg?v=2" alt="Esperienza 3"></div>
      </div>

      <div style="text-align:center; margin-top:18px;">
        <a class="btn form-link" data-i18n="exp.cta" data-i18n-href="form.url" href="https://docs.google.com/forms/d/e/1FAIpQLSd7jfkcP_KpGxCEdTSuEl7ZTzEvoEl6RJ9j-4DJYJ78Rnac3w/viewform?usp=header" target="_blank" rel="noopener">Parlaci dei tuoi interessi</a>
      </div>
    </div>
  </section>

  <!-- SEASONS -->
  <section class="section" id="stagioni">
    <div class="container">
      <h2 data-i18n="seasons.title">Vivi la Toscana tutto l'anno</h2>
      <div class="grid" style="margin-top:12px;">
        <div class="card" style="grid-column: span 12;"><strong data-i18n="seasons.spring">üå∏ Primavera</strong><p class="muted" data-i18n="seasons.springText">Paesaggi in fiore e clima mite in ogni angolo.</p></div>
        <div class="card" style="grid-column: span 12;"><strong data-i18n="seasons.summer">‚òÄÔ∏è Estate</strong><p class="muted" data-i18n="seasons.summerText">Fughe costiere e attivit√† outdoor ovunque.</p></div>
        <div class="card" style="grid-column: span 12;"><strong data-i18n="seasons.autumn">üçá Autunno</strong><p class="muted" data-i18n="seasons.autumnText">Vendemmie e sagre tra colline e borghi.</p></div>
        <div class="card" style="grid-column: span 12;"><strong data-i18n="seasons.winter">üé≠ Inverno</strong><p class="muted" data-i18n="seasons.winterText">Carnevale di Viareggio e benessere termale.</p></div>
      </div>

      <div class="thumb-row" aria-label="Galleria stagioni">
        <div class="thumb"><img src="assets/img/seasons1.jpg?v=2" alt="Stagioni 1"></div>
        <div class="thumb"><img src="assets/img/seasons2.jpg?v=2" alt="Stagioni 2"></div>
        <div class="thumb"><img src="assets/img/seasons3.jpg?v=2" alt="Stagioni 3"></div>
      </div>

      <div style="text-align:center; margin-top:22px;">
        <a class="btn" href="#galleria" role="button" data-i18n="seasons.galleryBtn">Galleria</a>
      </div>
    </div>
  </section>

  <!-- GALLERY -->
  <section class="section alt" id="galleria">
    <div class="container">
      <h2 data-i18n="gallery.title">Galleria</h2>
      <p class="muted" data-i18n="gallery.subtitle">Clicca per ingrandire. Su mobile scorri verso il basso: le immagini sono disposte in verticale.</p>

      <!-- Borghi medievali -->
      <div class="gallery-section" aria-label="Borghi medievali">
        <h3 data-i18n="gallery.borghi">Borghi medievali</h3>
        <div class="gallery-grid" id="grid-borghi-medievali">
          <div class="gallery-item"><img src="assets/img/borghi-medievali1_sm.jpg" data-full="assets/img/borghi-medievali1.jpg" alt="Borghi medievali"></div>
          <div class="gallery-item"><img src="assets/img/borghi-medievali2_sm.jpg" data-full="assets/img/borghi-medievali2.jpg" alt="Borghi medievali"></div>
          <div class="gallery-item"><img src="assets/img/borghi-medievali3_sm.jpg" data-full="assets/img/borghi-medievali3.jpg" alt="Borghi medievali"></div>
          <div class="gallery-item"><img src="assets/img/borghi-medievali4_sm.jpg" data-full="assets/img/borghi-medievali4.jpg" alt="Borghi medievali"></div>
        </div>
      </div>

      <!-- Colline del Chianti -->
      <div class="gallery-section" aria-label="Colline del Chianti">
        <h3 data-i18n="gallery.chianti">Colline del Chianti</h3>
        <div class="gallery-grid" id="grid-colline-chianti">
          <div class="gallery-item"><img src="assets/img/colline-chianti1_sm.jpg" data-full="assets/img/colline-chianti1.jpg" alt="Colline del Chianti"></div>
          <div class="gallery-item"><img src="assets/img/colline-chianti2_sm.jpg" data-full="assets/img/colline-chianti2.jpg" alt="Colline del Chianti"></div>
          <div class="gallery-item"><img src="assets/img/colline-chianti3_sm.jpg" data-full="assets/img/colline-chianti3.jpg" alt="Colline del Chianti"></div>
          <div class="gallery-item"><img src="assets/img/colline-chianti4_sm.jpg" data-full="assets/img/colline-chianti4.jpg" alt="Colline del Chianti"></div>
        </div>
      </div>

      <!-- Scansano Terme -->
      <div class="gallery-section" aria-label="Scansano Terme">
        <h3 data-i18n="gallery.terme">Scansano Terme</h3>
        <div class="gallery-grid" id="grid-scansano-terme">
          <div class="gallery-item"><img src="assets/img/scansano-terme1_sm.jpg" data-full="assets/img/scansano-terme1.jpg" alt="Scansano Terme"></div>
          <div class="gallery-item"><img src="assets/img/scansano-terme2_sm.jpg" data-full="assets/img/scansano-terme2.jpg" alt="Scansano Terme"></div>
          <div class="gallery-item"><img src="assets/img/scansano-terme3_sm.jpg" data-full="assets/img/scansano-terme3.jpg" alt="Scansano Terme"></div>
          <div class="gallery-item"><img src="assets/img/scansano-terme4_sm.jpg" data-full="assets/img/scansano-terme4.jpg" alt="Scansano Terme"></div>
        </div>
      </div>

      <!-- Forte dei Marmi -->
      <div class="gallery-section" aria-label="Forte dei Marmi">
        <h3 data-i18n="gallery.forte">Forte dei Marmi</h3>
        <div class="gallery-grid" id="grid-forte-dei-marmi">
          <div class="gallery-item"><img src="assets/img/forte-dei-marmi1_sm.jpg" data-full="assets/img/forte-dei-marmi1.jpg" alt="Forte dei Marmi"></div>
          <div class="gallery-item"><img src="assets/img/forte-dei-marmi2_sm.jpg" data-full="assets/img/forte-dei-marmi2.jpg" alt="Forte dei Marmi"></div>
          <div class="gallery-item"><img src="assets/img/forte-dei-marmi3_sm.jpg" data-full="assets/img/forte-dei-marmi3.jpg" alt="Forte dei Marmi"></div>
          <div class="gallery-item"><img src="assets/img/forte-dei-marmi4_sm.jpg" data-full="assets/img/forte-dei-marmi4.jpg" alt="Forte dei Marmi"></div>
        </div>
      </div>

      <!-- Pietrasanta -->
      <div class="gallery-section" aria-label="Pietrasanta">
        <h3 data-i18n="gallery.pietrasanta">Pietrasanta</h3>
        <div class="gallery-grid" id="grid-pietrasanta">
          <div class="gallery-item"><img src="assets/img/pietrasanta1_sm.jpg" data-full="assets/img/pietrasanta1.jpg" alt="Pietrasanta"></div>
          <div class="gallery-item"><img src="assets/img/pietrasanta2_sm.jpg" data-full="assets/img/pietrasanta2.jpg" alt="Pietrasanta"></div>
          <div class="gallery-item"><img src="assets/img/pietrasanta3_sm.jpg" data-full="assets/img/pietrasanta3.jpg" alt="Pietrasanta"></div>
          <div class="gallery-item"><img src="assets/img/pietrasanta4_sm.jpg" data-full="assets/img/pietrasanta4.jpg" alt="Pietrasanta"></div>
        </div>
      </div>

      <!-- Parco dell'Orecchiella -->
      <div class="gallery-section" aria-label="Parco dell'Orecchiella">
        <h3 data-i18n="gallery.parco">Parco dell'Orecchiella</h3>
        <div class="gallery-grid" id="grid-parco-orecchiella">
          <div class="gallery-item"><img src="assets/img/parco-orecchiella1_sm.jpg" data-full="assets/img/parco-orecchiella1.jpg" alt="Parco dell'Orecchiella"></div>
          <div class="gallery-item"><img src="assets/img/parco-orecchiella2_sm.jpg" data-full="assets/img/parco-orecchiella2.jpg" alt="Parco dell'Orecchiella"></div>
          <div class="gallery-item"><img src="assets/img/parco-orecchiella3_sm.jpg" data-full="assets/img/parco-orecchiella3.jpg" alt="Parco dell'Orecchiella"></div>
          <div class="gallery-item"><img src="assets/img/parco-orecchiella4_sm.jpg" data-full="assets/img/parco-orecchiella4.jpg" alt="Parco dell'Orecchiella"></div>
        </div>
      </div>

      <!-- Siena (auto) -->
      <div class="gallery-section" aria-label="Siena">
        <h3 data-i18n="gallery.siena">Siena</h3>
        <div class="gallery-grid" id="grid-siena"><!-- Popolata via JS se vuota --></div>
      </div>

      <!-- San Gimignano -->
      <div class="gallery-section" aria-label="San Gimignano">
        <h3 data-i18n="gallery.gimignano">San Gimignano</h3>
        <div class="gallery-grid" id="grid-san-gimignano">
          <div class="gallery-item"><img src="assets/img/san-gimignano1_sm.jpg" data-full="assets/img/san-gimignano1.jpg" alt="San Gimignano"></div>
          <div class="gallery-item"><img src="assets/img/san-gimignano2_sm.jpg" data-full="assets/img/san-gimignano2.jpg" alt="San Gimignano"></div>
          <div class="gallery-item"><img src="assets/img/san-gimignano3_sm.jpg" data-full="assets/img/san-gimignano3.jpg" alt="San Gimignano"></div>
          <div class="gallery-item"><img src="assets/img/san-gimignano4_sm.jpg" data-full="assets/img/san-gimignano4.jpg" alt="San Gimignano"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- WHY US -->
  <section class="section" id="perche">
    <div class="container">
      <h2 data-i18n="why.title">Perch√© scegliere Tuscany Driver Experience</h2>
      <div class="grid" style="margin-top:14px;">
        <div class="card" style="grid-column: span 12;"><h3 data-i18n="why.custom.title">Completamente personalizzato</h3><p class="muted" data-i18n="why.custom.text">Ogni itinerario nasce dai tuoi interessi specifici.</p></div>
        <div class="card" style="grid-column: span 12;"><h3 data-i18n="why.infinite.title">Infinite possibilit√†</h3><p class="muted" data-i18n="why.infinite.text">Qualsiasi destinazione toscana pu√≤ essere inclusa.</p></div>
        <div class="card" style="grid-column: span 12;"><h3 data-i18n="why.drivers.title">Autisti NCC professionali</h3><p class="muted" data-i18n="why.drivers.text">Autorizzati, esperti, che parlano inglese.</p></div>
        <div class="card" style="grid-column: span 12;"><h3 data-i18n="why.flexible.title">Partenze flessibili</h3><p class="muted" data-i18n="why.flexible.text">Da qualsiasi localit√† in Toscana o fuori regione.</p></div>
        <div class="card" style="grid-column: span 12;"><h3 data-i18n="why.authentic.title">Esperienze autentiche</h3><p class="muted" data-i18n="why.authentic.text">Dalla Toscana pi√π famosa a quella pi√π nascosta.</p></div>
        <div class="card" style="grid-column: span 12;"><h3 data-i18n="why.comfort.title">Viaggi confortevoli</h3><p class="muted" data-i18n="why.comfort.text">Veicoli premium, max 8 ore di guida al giorno.</p></div>
      </div>
    </div>
  </section>

  <!-- HOW IT WORKS -->
  <section class="section alt" id="come-funziona">
    <div class="container">
      <h2 data-i18n="how.title">Semplice. Personale. Indimenticabile.</h2>
      <div class="how-steps" style="margin-top:8px;">
        <div class="card"><strong data-i18n="how.step1.title">1) Raccontaci i tuoi sogni</strong><p class="muted" data-i18n="how.step1.text">Interessi, durata e punto di partenza.</p></div>
        <div class="card"><strong data-i18n="how.step2.title">2) Ricevi il tuo itinerario</strong><p class="muted" data-i18n="how.step2.text">Progettiamo la tua esperienza perfetta.</p></div>
        <div class="card"><strong data-i18n="how.step3.title">3) Viaggia con stile</strong><p class="muted" data-i18n="how.step3.text">L'autista si occupa di tutto, tu ti godi il viaggio.</p></div>
        <div class="card"><strong data-i18n="how.step4.title">4) Crea ricordi</strong><p class="muted" data-i18n="how.step4.text">La Toscana come l'hai sempre immaginata.</p></div>
      </div>
      <div style="text-align:center; margin-top:18px;">
        <a class="btn form-link" data-i18n="how.cta" data-i18n-href="form.url" href="https://docs.google.com/forms/d/e/1FAIpQLSd7jfkcP_KpGxCEdTSuEl7ZTzEvoEl6RJ9j-4DJYJ78Rnac3w/viewform?usp=header" target="_blank" rel="noopener">Inizia ora: richiedi il tuo itinerario</a>
      </div>
    </div>
  </section>

  <!-- TESTIMONIALS -->
  <section class="section" id="testimonials">
    <div class="container">
      <h2 data-i18n="testimonials.title">Cosa Dicono i Nostri Ospiti</h2>
      <div class="testimonial-grid">
        <div class="testimonial-card">
          <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          <p class="testimonial-text" data-i18n="testimonials.t1.text">"Esperienza indimenticabile! Il nostro autista Luca ci ha portato attraverso le colline del Chianti con una conoscenza locale impareggiabile. Ogni sosta era perfetta, dalle cantine nascoste ai panorami mozzafiato."</p>
          <div class="testimonial-author" data-i18n="testimonials.t1.author">‚Äî Marco e Giulia, Milano</div>
        </div>
        <div class="testimonial-card">
          <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          <p class="testimonial-text" data-i18n="testimonials.t2.text">"Abbiamo personalizzato completamente il nostro tour di 3 giorni. Michela ha organizzato tutto perfettamente: dalle terme di Saturnia ai borghi medievali. Servizio impeccabile e grande flessibilit√†."</p>
          <div class="testimonial-author" data-i18n="testimonials.t2.author">‚Äî Sarah Thompson, USA</div>
        </div>
        <div class="testimonial-card">
          <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          <p class="testimonial-text" data-i18n="testimonials.t3.text">"La nostra luna di miele in Toscana √® stata magica grazie a Tuscany Driver Experience. Ogni dettaglio era curato, dall'accoglienza all'aeroporto fino all'ultimo saluto. Consigliatissimo!"</p>
          <div class="testimonial-author" data-i18n="testimonials.t3.author">‚Äî Pierre e Marie, Francia</div>
        </div>
      </div>
    </div>
  </section>

  <!-- CONTACT -->
  <section class="section alt" id="contatti">
    <div class="container">
      <div class="card" style="display:grid; gap:14px;">
        <div>
          <h2 data-i18n="contact.title">Pronto per la tua avventura toscana?</h2>
          <p data-i18n="contact.subtitle">Ricevi una proposta di itinerario completamente personalizzata.</p>
        </div>
        <div style="display:flex; flex-wrap:wrap; gap:12px; align-items:center;">
          <a class="btn form-link" data-i18n="contact.cta" data-i18n-href="form.url" href="https://docs.google.com/forms/d/e/1FAIpQLSd7jfkcP_KpGxCEdTSuEl7ZTzEvoEl6RJ9j-4DJYJ78Rnac3w/viewform?usp=header" target="_blank" rel="noopener">Richiedi il tuo itinerario</a>
          <div class="muted" data-i18n="contact.or">Oppure contattaci:</div>
          <div style="display:flex; flex-direction:column; gap:4px;">
            <span><span data-i18n="contact.emailLabel">Email:</span> <a href="mailto:info@tuscanydriverexperience.com">info@tuscanydriverexperience.com</a></span>
            <span><span data-i18n="contact.phoneLabel">Telefono/WhatsApp:</span>
              <a href="https://wa.me/393892169474" target="_blank" rel="noopener">+39 389 216 9474 (Luca)</a> ‚Ä¢
              <a href="https://wa.me/393445815647" target="_blank" rel="noopener">+39 344 581 5647 (Michela)</a>
            </span>
            <span><span data-i18n="contact.websiteLabel">Sito:</span> <a href="https://www.tuscanydriverexperience.com" target="_blank" rel="noopener">www.tuscanydriverexperience.com</a></span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <footer>
    <div class="container">
      <div style="margin-bottom:6px;"><strong>Tuscany Driver Experience</strong> ‚Ä¢ <span data-i18n="footer.tagline">La tua porta d'accesso alla Toscana autentica</span></div>
      ¬© <span id="year"></span> Tuscany Driver Experience - <span data-i18n="footer.service">Servizio NCC Autorizzato</span> ‚Ä¢
      <a href="#" class="muted" data-i18n="footer.privacy">Privacy Policy</a> |
      <a href="#" class="muted" data-i18n="footer.terms">Termini di Servizio</a>
    </div>
  </footer>

  <!-- Lightbox container -->
  <div id="lightbox" class="lightbox" aria-hidden="true"><img alt="Anteprima immagine" /></div>

  <!-- GALLERIA: popolamento automatico SOLO per griglie vuote -->
  <script>
    (function () {
      'use strict';

      // CONFIG
      const CONFIG = {
        // Imposta qui owner/repo se vuoi usare GitHub API anche fuori da github.io, altrimenti metti null
        GH_SOURCE: { owner: 'TUO_USERNAME', repo: 'TUO_REPO' }, // oppure null

        // Manifest opzionale: file JSON con { "grid-siena": ["siena1","siena2", ...] }
        MANIFEST_URL: 'assets/img/manifest.json', // oppure null

        // Griglie da popolare automaticamente SOLO se vuote in HTML
        IMAGE_CONFIG: {
          // Opzione A: auto dal repo con prefisso
          'grid-siena': { prefix: 'siena', max: 12 }
          // Opzione B (solo locale): 'grid-siena': ['siena1','siena2','siena3','siena4']
        },

        DIRS: ['assets/img', 'assets'],
        DEFAULT_EXT: '.jpg',
        THUMB_SUFFIX: '_sm'
      };

      function escapeRegExp(s) { return s.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); }

      function inferRepoFromLocation() {
        const host = location.hostname;
        if (!host.endsWith('github.io')) return null;
        const owner = host.split('.')[0];
        const parts = location.pathname.split('/').filter(Boolean);
        const repo = parts.length ? parts[0] : owner + '.github.io';
        return { owner, repo };
      }

      async function fetchJson(url) {
        try {
          const res = await fetch(url, { cache: 'no-store' });
          if (!res.ok) return null;
          return await res.json();
        } catch { return null; }
      }

      async function loadManifest() {
        if (!CONFIG.MANIFEST_URL) return null;
        return await fetchJson(CONFIG.MANIFEST_URL);
      }

      async function listRepoFiles() {
        const inferred = inferRepoFromLocation() || CONFIG.GH_SOURCE;
        if (!inferred || !inferred.owner || !inferred.repo) throw new Error('Repo non configurato per GitHub API');

        const headers = { 'Accept': 'application/vnd.github.v3+json' };
        const all = [];
        for (const dir of CONFIG.DIRS) {
          const api = `https://api.github.com/repos/${inferred.owner}/${inferred.repo}/contents/${dir}`;
          try {
            const res = await fetch(api, { headers });
            if (!res.ok) continue;
            const list = await res.json();
            for (const it of list) {
              if (it && it.type === 'file' && /\.(jpe?g|png|webp|gif)$/i.test(it.name)) all.push(it);
            }
          } catch { /* ignora singola dir */ }
        }
        if (!all.length) throw new Error('Nessun file immagine trovato via API');
        return all;
      }

      function basenamesFromFilesByPrefix(files, prefix, max) {
        if (!Array.isArray(files)) return [];
        const extRe = /\.(?:jpe?g|png|webp|gif)$/i;
        const re = new RegExp('^' + escapeRegExp(prefix) + '[^/]*\\.(?:jpe?g|png|webp|gif)$', 'i');
        const set = new Set();
        for (const f of files) {
          if (re.test(f.name)) {
            const nameNoSm = f.name.replace(/_sm(?=\.(?:jpe?g|png|webp|gif)$)/i, '');
            const base = nameNoSm.replace(extRe, '');
            set.add(base);
          }
        }
        const arr = Array.from(set).sort();
        return typeof max === 'number' && max > 0 ? arr.slice(0, max) : arr;
      }

      function findUrlsForBase(files, base) {
        const b = escapeRegExp(base);
        const reFull = new RegExp('^' + b + '\\.(?:jpe?g|png|webp|gif)$', 'i');
        const reThumb = new RegExp('^' + b + escapeRegExp(CONFIG.THUMB_SUFFIX) + '\\.(?:jpe?g|png|webp|gif)$', 'i');

        if (Array.isArray(files)) {
          let full = null, thumb = null;
          for (const f of files) {
            if (!full && reFull.test(f.name)) full = f.download_url;
            if (!thumb && reThumb.test(f.name)) thumb = f.download_url;
            if (full && thumb) break;
          }
          if (full) return { full, thumb: thumb || full };
        }

        const localBase = CONFIG.DIRS[0] + '/' + base;
        return { full: localBase + CONFIG.DEFAULT_EXT, thumb: localBase + CONFIG.THUMB_SUFFIX + CONFIG.DEFAULT_EXT };
      }

      function renderGrid(gridId, items) {
        const grid = document.getElementById(gridId);
        if (!grid) return;
        const alt = gridId.replace(/^grid-/, '').replace(/-/g, ' ');
        grid.innerHTML = items.map(it =>
          '<div class="gallery-item"><img src="' + it.thumb + '" data-full="' + it.full + '" alt="' + alt + '" loading="lazy" decoding="async"></div>'
        ).join('');
      }

      async function populateGalleries() {
        const manifest = await loadManifest();

        let files = null;
        try { files = await listRepoFiles(); }
        catch (e) { console.warn('[Galleria] GitHub API non disponibile:', e && e.message ? e.message : e); }

        const grids = Object.keys(CONFIG.IMAGE_CONFIG);
        for (const gridId of grids) {
          const gridEl = document.getElementById(gridId);
          if (!gridEl) continue;
          if (gridEl.children.length > 0) continue; // NON toccare griglie gi√† piene

          let bases = [];
          if (manifest && Array.isArray(manifest[gridId])) {
            bases = manifest[gridId];
          } else {
            const conf = CONFIG.IMAGE_CONFIG[gridId];
            if (Array.isArray(conf)) {
              bases = conf;
            } else if (conf && typeof conf === 'object' && conf.prefix) {
              bases = basenamesFromFilesByPrefix(files, conf.prefix, conf.max || 12);
              if (!bases.length && !files) console.warn('[Galleria] Nessun elenco immagini disponibile per prefisso', conf.prefix, 'nella griglia', gridId);
            }
          }

          if (!bases.length) continue;
          const items = bases.map(base => findUrlsForBase(files, base));
          if (items.length) renderGrid(gridId, items);
        }
      }

      // Lightbox
      function simpleLightbox() {
        const lb = document.getElementById('lightbox');
        if (!lb) return;
        const lbImg = lb.querySelector('img');

        document.addEventListener('click', function (e) {
          const img = e.target && e.target.closest && e.target.closest('.gallery-item img');
          if (img) {
            lbImg.src = img.dataset.full || img.src;
            lb.classList.add('show');
            lb.setAttribute('aria-hidden', 'false');
          }
        });

        lb.addEventListener('click', function () {
          lb.classList.remove('show');
          lb.setAttribute('aria-hidden', 'true');
          lbImg.src = '';
        });

        document.addEventListener('keydown', function (e) {
          if (e.key === 'Escape' && lb.classList.contains('show')) {
            lb.classList.remove('show');
            lb.setAttribute('aria-hidden', 'true');
            lbImg.src = '';
          }
        });
      }

      function initGalleries() {
        populateGalleries().then(simpleLightbox).catch(simpleLightbox);
      }

      // Expose for reuse (optional)
      window.__GalleryInit = initGalleries;

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initGalleries);
      } else {
        initGalleries();
      }
    })();
  </script>

  <!-- I18N + meta + year -->
  <script>
    // Traduzioni
    const translations = {
      it: {
        meta: {
          title: 'Tuscany Driver Experience - Tour Privati con Autista',
          description: 'Itinerari 100% personalizzati in Toscana con autista privato NCC. Arte e cultura, vino e gastronomia, mare e montagna, benessere termale e molto altro. Richiedi il tuo itinerario su misura.'
        },
        form: { url: 'https://docs.google.com/forms/d/e/1FAIpQLSd7jfkcP_KpGxCEdTSuEl7ZTzEvoEl6RJ9j-4DJYJ78Rnac3w/viewform?usp=header' },
        hero: {
          badge: 'Autista privato ‚Ä¢ Tour su misura',
          title: 'Tuscany Driver Experience',
          subtitle: 'Scopri la Toscana a modo tuo. Itinerari completamente personalizzati: dalle colline del Chianti alle coste incontaminate, dai borghi medievali alle terme naturali. Il tuo autista privato, i tuoi orari, il tuo viaggio indimenticabile.',
          cta: 'Richiedi il tuo itinerario personalizzato'
        },
        about: {
          title: 'Vivi la Toscana oltre l\'ordinario',
          text: 'Creiamo itinerari su misura che mostrano l\'incredibile diversit√† dei paesaggi e delle esperienze toscane, adattandoci ai tuoi desideri e interessi.',
          pill1: 'Partenza ovunque (citt√†, aeroporti, anche fuori regione)',
          pill2: 'Tappe ed esperienze a tua scelta',
          pill3: 'Durata e ritmi personalizzati',
          pill4: 'Autisti NCC professionali e multilingue'
        },
        exp: {
          title: 'Esempi di Esperienze',
          art: { title: 'üèõÔ∏è Arte e Cultura', text: 'Rinascimento, architettura medievale e patrimonio artistico. Itinerari su misura secondo i tuoi interessi.' },
          wine: { title: 'üç∑ Enogastronomia', text: 'Dal Chianti a Montalcino, fino ai piccoli produttori nascosti. Degustazioni e sapori autentici.' },
          active: { title: 'üåä Active Escape', text: 'Garfagnana, Alpi Apuane, Versilia, Costa degli Etruschi: avventure mare, montagna e collina.' },
          spa: { title: '‚ô®Ô∏è Benessere Termale', text: 'Bagno Vignoni e altre gemme termali per un relax su misura.' },
          coast: { title: 'üèñÔ∏è Esperienze Costiere', text: 'Versilia e oltre: scegli tu la localit√† costiera che vuoi esplorare.' },
          classic: { title: 'üè∞ Toscana Classica (2-3 giorni)', text: 'Val d\'Orcia, Siena, Pienza, Montalcino o i borghi che sogni di visitare.' },
          cta: 'Parlaci dei tuoi interessi'
        },
        seasons: {
          title: 'Vivi la Toscana tutto l\'anno',
          spring: 'üå∏ Primavera', springText: 'Paesaggi in fiore e clima mite in ogni angolo.',
          summer: '‚òÄÔ∏è Estate', summerText: 'Fughe costiere e attivit√† outdoor ovunque.',
          autumn: 'üçá Autunno', autumnText: 'Vendemmie e sagre tra colline e borghi.',
          winter: 'üé≠ Inverno', winterText: 'Carnevale di Viareggio e benessere termale.',
          galleryBtn: 'Galleria'
        },
        gallery: {
          title: 'Galleria',
          subtitle: 'Clicca per ingrandire. Su mobile scorri verso il basso: le immagini sono disposte in verticale.',
          borghi: 'Borghi medievali',
          chianti: 'Colline del Chianti',
          terme: 'Scansano Terme',
          forte: 'Forte dei Marmi',
          pietrasanta: 'Pietrasanta',
          parco: 'Parco dell\'Orecchiella',
          siena: 'Siena',
          gimignano: 'San Gimignano'
        },
        why: {
          title: 'Perch√© scegliere Tuscany Driver Experience',
          custom: { title: 'Completamente personalizzato', text: 'Ogni itinerario nasce dai tuoi interessi specifici.' },
          infinite: { title: 'Infinite possibilit√†', text: 'Qualsiasi destinazione toscana pu√≤ essere inclusa.' },
          drivers: { title: 'Autisti NCC professionali', text: 'Autorizzati, esperti, che parlano inglese.' },
          flexible: { title: 'Partenze flessibili', text: 'Da qualsiasi localit√† in Toscana o fuori regione.' },
          authentic: { title: 'Esperienze autentiche', text: 'Dalla Toscana pi√π famosa a quella pi√π nascosta.' },
          comfort: { title: 'Viaggi confortevoli', text: 'Veicoli premium, max 8 ore di guida al giorno.' }
        },
        how: {
          title: 'Semplice. Personale. Indimenticabile.',
          step1: { title: '1) Raccontaci i tuoi sogni', text: 'Interessi, durata e punto di partenza.' },
          step2: { title: '2) Ricevi il tuo itinerario', text: 'Progettiamo la tua esperienza perfetta.' },
          step3: { title: '3) Viaggia con stile', text: 'L\'autista si occupa di tutto, tu ti godi il viaggio.' },
          step4: { title: '4) Crea ricordi', text: 'La Toscana come l\'hai sempre immaginata.' },
          cta: 'Inizia ora: richiedi il tuo itinerario'
        },
        testimonials: {
          title: 'Cosa Dicono i Nostri Ospiti',
          t1: { text: 'Esperienza indimenticabile! Il nostro autista Luca ci ha portato attraverso le colline del Chianti con una conoscenza locale impareggiabile. Ogni sosta era perfetta, dalle cantine nascoste ai panorami mozzafiato.', author: '‚Äî Marco e Giulia, Milano' },
          t2: { text: 'Abbiamo personalizzato completamente il nostro tour di 3 giorni. Michela ha organizzato tutto perfettamente: dalle terme di Saturnia ai borghi medievali. Servizio impeccabile e grande flessibilit√†.', author: '‚Äî Sarah Thompson, USA' },
          t3: { text: 'La nostra luna di miele in Toscana √® stata magica grazie a Tuscany Driver Experience. Ogni dettaglio era curato, dall\'accoglienza all\'aeroporto fino all\'ultimo saluto. Consigliatissimo!', author: '‚Äî Pierre e Marie, Francia' }
        },
        contact: {
          title: 'Pronto per la tua avventura toscana?',
          subtitle: 'Ricevi una proposta di itinerario completamente personalizzata.',
          cta: 'Richiedi il tuo itinerario',
          or: 'Oppure contattaci:',
          emailLabel: 'Email:',
          phoneLabel: 'Telefono/WhatsApp:',
          websiteLabel: 'Sito:'
        },
        footer: {
          tagline: 'La tua porta d\'accesso alla Toscana autentica',
          service: 'Servizio NCC Autorizzato',
          privacy: 'Privacy Policy',
          terms: 'Termini di Servizio'
        }
      },
      en: {
        meta: {
          title: 'Tuscany Driver Experience - Private Tours with Driver',
          description: '100% customized itineraries in Tuscany with private NCC driver. Art and culture, wine and gastronomy, sea and mountains, thermal wellness and much more. Request your tailor-made itinerary.'
        },
        form: { url: 'https://docs.google.com/forms/d/e/1FAIpQLScbxGg-jm8mIaiUTLHlnoVWp0we_Kv4HhEyg7c0sEbH4b85xQ/viewform?usp=header' },
        hero: {
          badge: 'Private driver ‚Ä¢ Tailor-made tours',
          title: 'Tuscany Driver Experience',
          subtitle: 'Discover Tuscany your way. Completely customized itineraries: from the Chianti hills to pristine coasts, from medieval villages to natural hot springs. Your private driver, your schedule, your unforgettable journey.',
          cta: 'Request your personalized itinerary'
        },
        about: {
          title: 'Experience Tuscany beyond the ordinary',
          text: 'We create tailor-made itineraries that showcase the incredible diversity of Tuscan landscapes and experiences, adapting to your desires and interests.',
          pill1: 'Departure anywhere (cities, airports, even outside the region)',
          pill2: 'Stops and experiences of your choice',
          pill3: 'Customized duration and pace',
          pill4: 'Professional multilingual NCC drivers'
        },
        exp: {
          title: 'Experience Examples',
          art: { title: 'üèõÔ∏è Art and Culture', text: 'Renaissance, medieval architecture and artistic heritage. Tailor-made itineraries according to your interests.' },
          wine: { title: 'üç∑ Wine and Gastronomy', text: 'From Chianti to Montalcino, to hidden small producers. Tastings and authentic flavors.' },
          active: { title: 'üåä Active Escape', text: 'Garfagnana, Apuan Alps, Versilia, Etruscan Coast: sea, mountain and hill adventures.' },
          spa: { title: '‚ô®Ô∏è Thermal Wellness', text: 'Bagno Vignoni and other thermal gems for tailor-made relaxation.' },
          coast: { title: 'üèñÔ∏è Coastal Experiences', text: 'Versilia and beyond: you choose the coastal location you want to explore.' },
          classic: { title: 'üè∞ Classic Tuscany (2-3 days)', text: 'Val d\'Orcia, Siena, Pienza, Montalcino or the villages you dream of visiting.' },
          cta: 'Tell us about your interests'
        },
        seasons: {
          title: 'Experience Tuscany all year round',
          spring: 'üå∏ Spring', springText: 'Blooming landscapes and mild climate everywhere.',
          summer: '‚òÄÔ∏è Summer', summerText: 'Coastal escapes and outdoor activities everywhere.',
          autumn: 'üçá Autumn', autumnText: 'Harvests and festivals among hills and villages.',
          winter: 'üé≠ Winter', winterText: 'Viareggio Carnival and thermal wellness.',
          galleryBtn: 'Gallery'
        },
        gallery: {
          title: 'Gallery',
          subtitle: 'Click to enlarge. On mobile scroll down: images are arranged vertically.',
          borghi: 'Medieval villages',
          chianti: 'Chianti Hills',
          terme: 'Scansano Terme',
          forte: 'Forte dei Marmi',
          pietrasanta: 'Pietrasanta',
          parco: 'Orecchiella Park',
          siena: 'Siena',
          gimignano: 'San Gimignano'
        },
        why: {
          title: 'Why choose Tuscany Driver Experience',
          custom: { title: 'Completely customized', text: 'Every itinerary is born from your specific interests.' },
          infinite: { title: 'Infinite possibilities', text: 'Any Tuscan destination can be included.' },
          drivers: { title: 'Professional NCC drivers', text: 'Licensed, experienced, English-speaking.' },
          flexible: { title: 'Flexible departures', text: 'From any location in Tuscany or outside the region.' },
          authentic: { title: 'Authentic experiences', text: 'From the most famous to the most hidden Tuscany.' },
          comfort: { title: 'Comfortable travel', text: 'Premium vehicles, max 8 hours driving per day.' }
        },
        how: {
          title: 'Simple. Personal. Unforgettable.',
          step1: { title: '1) Tell us your dreams', text: 'Interests, duration and starting point.' },
          step2: { title: '2) Receive your itinerary', text: 'We design your perfect experience.' },
          step3: { title: '3) Travel in style', text: 'The driver takes care of everything, you enjoy the journey.' },
          step4: { title: '4) Create memories', text: 'Tuscany as you\'ve always imagined it.' },
          cta: 'Start now: request your itinerary'
        },
        testimonials: {
          title: 'What Our Guests Say',
          t1: { text: 'Unforgettable experience! Our driver Luca took us through the Chianti hills with unparalleled local knowledge. Every stop was perfect, from hidden wineries to breathtaking views.', author: '‚Äî Marco and Giulia, Milan' },
          t2: { text: 'We completely customized our 3-day tour. Michela organized everything perfectly: from Saturnia hot springs to medieval villages. Impeccable service and great flexibility.', author: '‚Äî Sarah Thompson, USA' },
          t3: { text: 'Our honeymoon in Tuscany was magical thanks to Tuscany Driver Experience. Every detail was taken care of, from airport welcome to final goodbye. Highly recommended!', author: '‚Äî Pierre and Marie, France' }
        },
        contact: {
          title: 'Ready for your Tuscan adventure?',
          subtitle: 'Receive a completely personalized itinerary proposal.',
          cta: 'Request your itinerary',
          or: 'Or contact us:',
          emailLabel: 'Email:',
          phoneLabel: 'Phone/WhatsApp:',
          websiteLabel: 'Website:'
        },
        footer: {
          tagline: 'Your gateway to authentic Tuscany',
          service: 'Licensed NCC Service',
          privacy: 'Privacy Policy',
          terms: 'Terms of Service'
        }
      }
    };

    function setLanguage(lang) {
      const t = translations[lang] || translations.it;

      // <html lang>
      document.documentElement.setAttribute('lang', lang);
      document.documentElement.setAttribute('data-lang', lang);

      // Title + meta description
      document.title = t.meta.title;
      const metaDesc = document.querySelector('meta[name="description"]');
      if (metaDesc) metaDesc.content = t.meta.description;

      // Buttons UI
      document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.toggle('active', btn.dataset.lang === lang));

      // Testo: elementi con data-i18n (dot-path)
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        const val = key.split('.').reduce((acc, k) => (acc && acc[k] != null ? acc[k] : null), t);
        if (val != null) el.textContent = val;
      });

      // Link della form: elementi con data-i18n-href="form.url"
      const formUrl = t.form && t.form.url;
      if (formUrl) {
        document.querySelectorAll('.form-link').forEach(a => { a.href = formUrl; });
      }

      // Salva preferenza
      try { localStorage.setItem('preferredLanguage', lang); } catch {}
    }

    // Init on load
    (function () {
      // Year
      const y = document.getElementById('year');
      if (y) y.textContent = new Date().getFullYear();

      // Initial language
      let initial = 'it';
      try {
        const saved = localStorage.getItem('preferredLanguage');
        if (saved) initial = saved;
        else if (navigator.language && !navigator.language.toLowerCase().startsWith('it')) initial = 'en';
      } catch {}
      setLanguage(initial);
    })();
  </script>
</body>
</html>
